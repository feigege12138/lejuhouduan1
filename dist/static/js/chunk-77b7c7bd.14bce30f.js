(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-77b7c7bd"],{"5f60":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"main"},[a("el-card",{staticClass:"box-card",attrs:{shadow:"never"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.add()}}},[t._v("新增")])],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.brandList,border:""}},[a("el-table-column",{attrs:{fixed:"",type:"index",label:"#",width:"50",align:"center"}}),a("el-table-column",{attrs:{prop:"name",label:"品牌名称",width:"150",align:"center"}}),a("el-table-column",{attrs:{label:"展示状态",width:"180",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-switch",{attrs:{"inactive-text":"是否展示","active-value":1,"inactive-value":0},on:{change:function(a){return t.showStatus(e.row)}},model:{value:e.row.showStatus,callback:function(a){t.$set(e.row,"showStatus",a)},expression:"scope.row.showStatus"}})]}}])}),a("el-table-column",{attrs:{label:"logo",width:"200",align:"center"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("img",{staticStyle:{width:"100px",height:"100px"},attrs:{src:t.row.logo,alt:""}})]}}])}),a("el-table-column",{attrs:{prop:"city",label:"专区大图",width:"200",align:"center"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("img",{staticStyle:{width:"100px",height:"100px"},attrs:{src:t.row.bigPic,alt:""}})]}}])}),a("el-table-column",{attrs:{prop:"brandStory",label:"品牌故事",width:"150",align:"center"}}),a("el-table-column",{attrs:{prop:"createTime",label:"创建时间",width:"300",align:"center"}}),a("el-table-column",{attrs:{prop:"sort",label:"排序",width:"100",align:"center"}}),a("el-table-column",{attrs:{prop:"productCommentCount",label:"产品评论数量",width:"150",align:"center"}}),a("el-table-column",{attrs:{prop:"productCount",label:"产品数量",width:"150",align:"center"}}),a("el-table-column",{attrs:{label:"是否品牌制造商",width:"150",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v(t._s(0==e.row.factoryStatus?"否":"是"))])]}}])}),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"100",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.alter(e.row)}}},[t._v("编辑")]),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.del(e.row.id)}}},[t._v("删除")])]}}])})],1),a("el-pagination",{attrs:{"current-page":t.currentPage4,"page-sizes":[5,10,15,20],"page-size":100,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),a("addAlter",{ref:"mychild"})],1)},l=[],i=a("a760"),r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-dialog",{attrs:{title:"品牌详情",visible:t.dialogVisible,width:"80%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("el-form",{attrs:{"label-width":"80px",model:t.formLabelAlign}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"品牌名称"}},[a("el-input",{model:{value:t.formLabelAlign.name,callback:function(e){t.$set(t.formLabelAlign,"name",e)},expression:"formLabelAlign.name"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"首字母"}},[a("el-input",{model:{value:t.formLabelAlign.firstLetter,callback:function(e){t.$set(t.formLabelAlign,"firstLetter",e)},expression:"formLabelAlign.firstLetter"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"排序"}},[a("el-input",{model:{value:t.formLabelAlign.sort,callback:function(e){t.$set(t.formLabelAlign,"sort",e)},expression:"formLabelAlign.sort"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"产品数量"}},[a("el-input",{model:{value:t.formLabelAlign.productCount,callback:function(e){t.$set(t.formLabelAlign,"productCount",e)},expression:"formLabelAlign.productCount"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"是否展示"}},[a("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:t.formLabelAlign.showStatus,callback:function(e){t.$set(t.formLabelAlign,"showStatus",e)},expression:"formLabelAlign.showStatus"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"是否为品牌制造商"}},[a("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:t.formLabelAlign.factoryStatus,callback:function(e){t.$set(t.formLabelAlign,"factoryStatus",e)},expression:"formLabelAlign.factoryStatus"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"上传logo"}},[a("el-upload",{ref:"uploads",staticClass:"avatar-uploader",attrs:{action:"/lejuAdmin/material/uploadFileOssSave","on-success":t.handleAvatarSuccess,headers:t.headers}},[t.logo?a("img",{staticClass:"avatar",staticStyle:{width:"100px",height:"100px"},attrs:{src:t.logo}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"上传大图"}},[a("el-upload",{ref:"upload",staticClass:"avatar-uploader",attrs:{action:"/lejuAdmin/material/uploadFileOssSave","on-success":t.handleAvatarSuccesss,headers:t.headers}},[t.bigPic?a("img",{staticClass:"avatar",staticStyle:{width:"100px",height:"100px"},attrs:{src:t.bigPic}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.fix(t.aaa)}}},[t._v("确 定")])],1)],1)],1)},s=[],o=(a("2b3d"),a("d3b7"),a("3ca3"),a("ddb0"),a("2f4d")),c={data:function(){return{dialogVisible:!1,formLabelAlign:{},logo:"",bigPic:"",aaa:!1}},computed:{headers:function(){var t=Object(o["b"])();return{token:t}}},methods:{remove:function(t){t?(this.formLabelAlign=t,this.logo=t.logo,this.bigPic=t.bigPic,this.aaa=!0,this.dialogVisible=!0):(this.formLabelAlign={},this.logo="",this.bigPic="",this.aaa=!1)},fix:function(t){var e=this;this.aaa?i["a"].updateBrand(this.formLabelAlign).then((function(t){t.success?e.$message.success("编辑成功"):e.$message.error("编辑失败")})):i["a"].addBrand(this.formLabelAlign).then((function(t){t.success?e.$message.success("新增成功"):e.$message.error("新增失败"),e.$parent.getBrandList()})),this.dialogVisible=!1},init:function(t){this.dialogVisible=t},handleAvatarSuccess:function(t,e){this.logo=URL.createObjectURL(e.raw),this.formLabelAlign.logo=this.logo,this.$refs.uploads.clearFiles()},handleAvatarSuccesss:function(t,e){this.bigPic=URL.createObjectURL(e.raw),this.formLabelAlign.bigPic=this.bigPic,this.$refs.upload.clearFiles()}}},u=c,d=a("2877"),f=Object(d["a"])(u,r,s,!1,null,null,null),h=f.exports,m={data:function(){return{page:1,num:5,brandList:[],loading:!1,dialogVisible:!0,total:1,currentPage4:1}},components:{addAlter:h},created:function(){this.getBrandList()},methods:{ceshi:function(){},add:function(){this.$refs.mychild.remove(!1),this.$refs.mychild.init(this.dialogVisible)},getBrandList:function(){var t=this;this.loading=!0,i["a"].findAllBrand(this.page,this.num).then((function(e){t.brandList=e.data.rows,t.loading=!1,t.total=e.data.total}))},alter:function(t){this.$refs.mychild.remove(t)},del:function(t){var e=this;this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){i["a"].delBrand(t).then((function(t){t.success?(e.$message.success("删除成功"),e.getBrandList()):e.$message.success("删除失败")}))})).catch((function(){e.$message.info("取消删除")}))},showStatus:function(t){var e=this;i["a"].switchShowStatus({id:t.id,status:t.showStatus}).then((function(t){t.success?(e.$message.success("修改状态成功"),e.getBrandList()):e.$message.error("修改状态失败")}))},handleSizeChange:function(t){console.log("每页 ".concat(t," 条")),this.num=t,this.getBrandList()},handleCurrentChange:function(t){console.log("当前页: ".concat(t)),this.page=t,this.getBrandList()}}},b=m,g=(a("d657"),Object(d["a"])(b,n,l,!1,null,"597feaea",null));e["default"]=g.exports},"96c3":function(t,e,a){},"9c66":function(t,e,a){"use strict";a("d3b7");var n=a("bc3a"),l=a.n(n),i=a("5c96"),r=a("2f4d"),s=l.a.create({baseURL:"http://leju.bufan.cloud",timeout:5e3});s.interceptors.request.use((function(t){var e=Object(r["b"])();return e&&(t.headers["token"]=Object(r["b"])()),t}),(function(t){return console.log(t),Promise.reject(t)})),s.interceptors.response.use((function(t){var e=t.data;return e}),(function(t){return console.log("err"+t),Object(i["Message"])({message:t.message,type:"error",duration:5e3}),Promise.reject(t)})),e["a"]=s},a760:function(t,e,a){"use strict";a("99af");var n=a("9c66");function l(t,e,a){return Object(n["a"])({url:"/lejuAdmin/product/productsByPage/".concat(t,"/").concat(e),method:"POST",data:a})}function i(t){return Object(n["a"])({url:"/lejuAdmin/product/switchNewStatus",method:"POST",data:t})}function r(t){return Object(n["a"])({url:"/lejuAdmin/product/switchRecommandStatus\n    ",method:"POST",data:t})}function s(t){return Object(n["a"])({url:"/lejuAdmin/product/switchVerifyStatus\n    ",method:"POST",data:t})}function o(t){return Object(n["a"])({url:"/lejuAdmin/product/switchPublishStatus\n    ",method:"POST",data:t})}function c(t){return Object(n["a"])({url:"/lejuAdmin/product/del/".concat(t),method:"DELETE"})}function u(t){return Object(n["a"])({url:"/lejuAdmin/product/productSkusDetail/".concat(t),method:"GET"})}function d(t){return Object(n["a"])({url:"/lejuAdmin/product/updateProductAndSkus",method:"POST",data:t})}function f(t){return Object(n["a"])({url:"/lejuAdmin/brand/switchShowStatus",method:"POST",data:t})}function h(t){return Object(n["a"])({url:"/lejuAdmin/product/addProductAndSkus",method:"POST",data:t})}function m(t,e){return Object(n["a"])({url:"/lejuAdmin/brand/findBrandByPage/".concat(t,"/").concat(e),method:"GET"})}function b(t){return Object(n["a"])({url:"/lejuAdmin/brand/delBrand/".concat(t),method:"DELETE"})}function g(t){return Object(n["a"])({url:"/lejuAdmin/brand/addBrand",method:"POST",data:t})}function p(t){return Object(n["a"])({url:"/lejuAdmin/brand/updateBrand",method:"POST",data:t})}function w(){return Object(n["a"])({url:"/lejuAdmin/category/getAllCategory",method:"GET"})}e["a"]={productsByPage:l,switchNewStatus:i,switchRecommandStatus:r,switchVerifyStatus:s,switchPublishStatus:o,del:c,dproductSkusDetailel:u,addProductAndSkus:h,updateProductAndSkus:d,findAllBrand:m,switchShowStatus:f,delBrand:b,addBrand:g,updateBrand:p,getAllCategory:w}},d657:function(t,e,a){"use strict";a("96c3")}}]);